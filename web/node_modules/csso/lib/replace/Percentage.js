var lexer = require('css-tree').lexer;
var packNumber = require('./Number').pack;
var blacklist = new Set([
    'width',
    'min-width',
    'max-width',
    'height',
    'min-height',
    'max-height',

    'flex',
    '-ms-flex'
]);

module.exports = function compressPercentage(node, item) {
    node.value = packNumber(node.value, item);

    if (node.value === '0' && this.declaration && !blacklist.has(this.declaration.property)) {
        item.data = {
            type: 'Number',
            loc: node.loc,
            value: node.value
        };

        if (!lexer.matchDeclaration(this.declaration).isType(item.data, 'length')) {
            item.data = node;
        }
    }
};
