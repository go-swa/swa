var abort = require('./abort.js')
  , async = require('./async.js')
  ;

module.exports = terminator;

/**
 * Terminates jobs in the attached state context
 *
 * @this  AsyncKitState#
 * @param {function} callback - final callback to invoke after termination
 */
function terminator(callback)
{
  if (!Object.keys(this.jobs).length)
  {
    return;
  }

  this.index = this.size;

  abort(this);

  async(callback)(null, this.results);
}
