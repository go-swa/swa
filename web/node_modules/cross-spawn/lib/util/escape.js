'use strict';

const metaCharsRegExp = /([()\][%!^"`<>&|;, *?])/g;

function escapeCommand(arg) {
    arg = arg.replace(metaCharsRegExp, '^$1');

    return arg;
}

function escapeArgument(arg, doubleEscapeMetaChars) {
    arg = `${arg}`;


    arg = arg.replace(/(\\*)"/g, '$1$1\\"');

    arg = arg.replace(/(\\*)$/, '$1$1');


    arg = `"${arg}"`;

    arg = arg.replace(metaCharsRegExp, '^$1');

    if (doubleEscapeMetaChars) {
        arg = arg.replace(metaCharsRegExp, '^$1');
    }

    return arg;
}

module.exports.command = escapeCommand;
module.exports.argument = escapeArgument;
