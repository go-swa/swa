var buble = require('./buble.js')

var defaultOptions = {
  transforms: {
    modules: false,
    stripWith: true,
    stripWithFunctional: false
  },
  objectAssign: 'Object.assign'
}

module.exports = function transpile (code, opts) {
  if (opts) {
    opts = Object.assign({}, defaultOptions, opts)
    opts.transforms = Object.assign({}, defaultOptions.transforms, opts.transforms)
  } else {
    opts = defaultOptions
  }
  var code = buble.transform(code, opts).code
  return code
}
