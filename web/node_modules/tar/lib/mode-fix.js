'use strict'
module.exports = (mode, isDir, portable) => {
  mode &= 0o7777

  if (portable) {
    mode = (mode | 0o600) & ~0o22
  }

  if (isDir) {
    if (mode & 0o400) {
      mode |= 0o100
    }
    if (mode & 0o40) {
      mode |= 0o10
    }
    if (mode & 0o4) {
      mode |= 0o1
    }
  }
  return mode
}
